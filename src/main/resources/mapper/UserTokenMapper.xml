<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cn.xiangstudy.generalproject.mapper.UserTokenMapper">

    <sql id="allField">
        select token_id, user_id, token, create_time, remark from sys_token
    </sql>

    <insert id="insertUserToken">
        insert into sys_token
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="userId != null">
                user_id,
            </if>
            <if test="token != null">
                token,
            </if>
            <if test="del_flag != null">
                del_flag,
            </if>
            <if test="create_time != null">
                create_time,
            </if>
            <if test="remark != null">
                remark,
            </if>
        </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="userId != null">
                #{userId},
            </if>
            <if test="token != null">
                #{token},
            </if>
            <if test="del_flag != null">
                #{delFlag},
            </if>
            <if test="create_time != null">
                #{createTime},
            </if>
            <if test="remark != null">
                #{remark},
            </if>
        </trim>
    </insert>

    <select id="selectUserTokenByToken" resultType="sysToken">
        <include refid="allField"/>
        where token = #{token} and del_flag = 0
    </select>
</mapper>